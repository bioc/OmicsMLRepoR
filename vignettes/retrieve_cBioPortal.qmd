---
title: "Retrieving Data from cBioPortal"
author:
  - Kaelyn Long
---

```{r libraries, echo = FALSE}
suppressPackageStartupMessages({
    library(cBioPortalData)
})
```

Retrieving specific samples from the cBioPortal API is very simple. First, we
set up the API and view the studies included.

```{r}
# Set up cBioPortal API
cbio <- cBioPortal()
studies <- getStudies(cbio, buildReport = TRUE)
head(studies)
```

We can then retrieve our list of desired samples using any method. Here, we will
browse the types of samples available within the study "acc_tcga" and choose a
random subset of 5 samples with protein ("rppa") data
(sampleListId = "acc_tcga_rppa").

```{r}
# View sample lists
sampleLists(cbio, studyId = "acc_tcga")
```

```{r}
# View samples in selected list
samps <- samplesInSampleLists(cbio, "acc_tcga_rppa")[[1]]
samps
```

```{r}
# Select random subset of samples
sampset <- sample(samps, 5)
```

Once we have our list of sample IDs, we can simply provide that to the
`cBioPortalData` function in the `sampleIds` argument.

```{r}
# Retrieve samples from cBioPortal API
rppa <- cBioPortalData(api = cbio,
                       by = "hugoGeneSymbol",
                       studyId = "acc_tcga",
                       sampleIds = sampset,
                       genePanelId = "IMPACT341"
)
```

In order to retrieve samples from multiple studies, simply run `cBioPortalData` once for
each study represented in the sample list. Below we see the retrieval of 5 random samples
each from the "acc_tcga" and "acc_tcga_gdc" studies.

```{r}
# Samples from multiple studies
# acc_tcga
a <- c("TCGA-OR-A5K4-01",
       "TCGA-OR-A5KX-01",
       "TCGA-OR-A5JJ-01",
       "TCGA-OR-A5JQ-01",
       "TCGA-OR-A5L5-01")

acc_tcga_samples <- cBioPortalData(api = cbio,
                                   by = "hugoGeneSymbol",
                                   studyId = "acc_tcga",
                                   sampleIds = a,
                                   genePanelId = "IMPACT341"
                                   )

# acc_tcga_gdc
b <- c("TCGA-OR-A5JC-01",
       "TCGA-P6-A5OH-01",
       "TCGA-OR-A5K6-01",
       "TCGA-OR-A5LS-01",
       "TCGA-OR-A5JS-01")

acc_tcga_gdc_samples <- cBioPortalData(api = cbio,
                                       by = "hugoGeneSymbol",
                                       studyId = "acc_tcga",
                                       sampleIds = a,
                                       genePanelId = "IMPACT341"
                                       )
```